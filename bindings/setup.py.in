"""
File: bindings/setup.py.in 


Description: Build for cython modules
"""

from setuptools import setup, Extension 
from Cython.Build import cythonize
import Cython.Compiler.Options
import numpy as np

Cython.Compiler.Options.docstrings = True
Cython.Compiler.Options.error_on_unknown_names = True
Cython.Compiler.Options.gcc_branch_hints = True
Cython.Compiler.Options.cimport_from_pyx = True

ext_modules = [
    Extension(
        "@PROJECT_NAME@",
        sources=["@SOURCE_DIR@/bindings/src/rtmp_streamer.pyx",
                 "@SOURCE_DIR@/src/rtmp.cpp"],
        language="c++",
        include_dirs=[np.get_include(), 
                      "@INCLUDE_DIRS@"],
        library_dirs=["@LIBRARY_DIRS@"],
        libraries=["@LIBRARIES@"],
        extra_compile_args=["-std=c++17"],
    )
]

setup(
    name="@PROJECT_NAME@",
    ext_modules=cythonize(
        ext_modules,
        build_dir="build",
    ),
    script_args=["build"],
    verbose=True,

)


